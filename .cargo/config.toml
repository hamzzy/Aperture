[build]
# Target for eBPF programs
target-dir = "target"

[target.x86_64-unknown-linux-gnu]
linker = "clang"
rustflags = ["-C", "link-arg=-fuse-ld=lld"]

# eBPF build configuration
[target.bpfel-unknown-none]
linker = "bpf-linker"
rustflags = [
    "-C", "link-arg=--disable-memory-builtins",
    "-C", "debuginfo=2",
    "-C", "debug-assertions=no",
    "-C", "overflow-checks=no",
    "-C", "opt-level=3",
    "-Z", "ub-checks=no",
]

[alias]
# Useful cargo aliases
xtask = "run --package xtask --"
build-ebpf = "build --package agent-ebpf --target bpfel-unknown-none -Z build-std=core"
